<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Театр историй</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Playfair+Display:ital@1&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Шапка -->
    <header class="new-header">
        <div class="header-container">
            <h1 class="header-title">ТЕАТР ИСТОРИЙ</h1>
        </div>
    </header>

    <!-- Слайды -->
    <div class="slides-container" id="slidesContainer">
        <div class="slide-wrapper">
            <!-- Слайд 1 -->
            <div class="slide-item" data-slide="1">
                <img src="Images/img1.png" alt="Слайд 1">
            </div>
            
            <!-- Чехов1.M4V (после 1 слайда) -->
            <div class="video-item" data-video="1">
                <video controls preload="metadata" playsinline muted>
                    <source src="Чехов1.M4V" type="video/mp4">
                    Ваш браузер не поддерживает видео.
                </video>
            </div>
            
            <!-- Слайды 2-3 -->
            <div class="slide-item" data-slide="2">
                <img src="Images/img2.png" alt="Слайд 2">
            </div>
            <div class="slide-item" data-slide="3">
                <img src="Images/img3.png" alt="Слайд 3">
            </div>
            
            <!-- Изба3.MP4 (после 3 слайда) -->
            <div class="video-item" data-video="3">
                <video controls preload="metadata" playsinline muted>
                    <source src="Изба3.MP4" type="video/mp4">
                    Ваш браузер не поддерживает видео.
                </video>
            </div>
            
            <!-- Слайды 4-5 -->
            <div class="slide-item" data-slide="4">
                <img src="Images/img4.png" alt="Слайд 4">
            </div>
            <div class="slide-item" data-slide="5">
                <img src="Images/img5.png" alt="Слайд 5">
            </div>
            
            <!-- Егор5.MP4 (после 5 слайда) -->
            <div class="video-item" data-video="5">
                <video controls preload="metadata" playsinline muted>
                    <source src="Егор5.MP4" type="video/mp4">
                    Ваш браузер не поддерживает видео.
                </video>
            </div>
            
            <!-- Слайды 6-7 -->
            <div class="slide-item" data-slide="6">
                <img src="Images/img6.png" alt="Слайд 6">
            </div>
            <div class="slide-item" data-slide="7">
                <img src="Images/img7.png" alt="Слайд 7">
            </div>
            
            <!-- Патрики7.MOV (после 7 слайда) -->
            <div class="video-item" data-video="7">
                <video controls preload="metadata" playsinline muted>
                    <source src="Патрики7.MOV" type="video/mp4">
                    Ваш браузер не поддерживает видео.
                </video>
            </div>
            
            <!-- Слайды 8-11 -->
            <div class="slide-item" data-slide="8">
                <img src="Images/img8.png" alt="Слайд 8">
            </div>
            <div class="slide-item" data-slide="9">
                <img src="Images/img9.png" alt="Слайд 9">
            </div>
            <div class="slide-item" data-slide="10">
                <img src="Images/img10.png" alt="Слайд 10">
            </div>
            <div class="slide-item" data-slide="11">
                <img src="Images/img11.png" alt="Слайд 11">
            </div>
            
            <!-- Раздел с отзывами -->
            <div class="reviews-section">
                <h2 class="reviews-title">НАШИ ОТЗЫВЫ</h2>
                <div class="videos-container">
                    <div class="video-wrapper">
                        <video id="video1" controls preload="metadata" playsinline muted>
                            <source src="Video1.MOV" type="video/mp4">
                            Ваш браузер не поддерживает видео.
                        </video>
                    </div>
                    <div class="video-wrapper">
                        <video controls preload="metadata" playsinline muted>
                            <source src="Video2.MP4" type="video/mp4">
                            Ваш браузер не поддерживает видео.
                        </video>
                    </div>
                    <div class="video-wrapper">
                        <video controls preload="metadata" playsinline muted>
                            <source src="Video3.MP4" type="video/mp4">
                            Ваш браузер не поддерживает видео.
                        </video>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Кнопка внизу как ШАПКА -->
    <div class="bottom-button">
        <div class="button-container">
            <button class="main-button" onclick="contactMe()">
                <span class="button-text">Купить билет</span>
            </button>
        </div>
    </div>

    <script>
        function contactMe() {
            alert('Спасибо за интерес! Свяжитесь со мной по телефону или email.');
        }

        // Анимация и автозапуск
        document.addEventListener('DOMContentLoaded', function() {
            const slidesContainer = document.getElementById('slidesContainer');
            const slideItems = document.querySelectorAll('.slide-item');
            const videoItems = document.querySelectorAll('.video-item, .video-wrapper');
            
            function checkVisibility() {
                const containerRect = slidesContainer.getBoundingClientRect();
                const scrollTop = slidesContainer.scrollTop;
                const containerHeight = slidesContainer.clientHeight;
                
                // Анимация слайдов
                slideItems.forEach(item => {
                    const itemRect = item.getBoundingClientRect();
                    const itemTop = itemRect.top - containerRect.top + scrollTop;
                    const itemBottom = itemTop + item.offsetHeight;
                    
                    // Если слайд в зоне видимости
                    if (itemTop < scrollTop + containerHeight * 0.8 && 
                        itemBottom > scrollTop + containerHeight * 0.2) {
                        item.classList.add('active');
                    }
                });
                
                // Анимация видео
                videoItems.forEach(item => {
                    const itemRect = item.getBoundingClientRect();
                    const itemTop = itemRect.top - containerRect.top + scrollTop;
                    const itemBottom = itemTop + item.offsetHeight;
                    
                    // Если видео в зоне видимости
                    if (itemTop < scrollTop + containerHeight * 0.8 && 
                        itemBottom > scrollTop + containerHeight * 0.2) {
                        item.classList.add('active');
                    }
                });
                
                // Автозапуск видео
                const videos = document.querySelectorAll('video');
                videos.forEach(video => {
                    const videoRect = video.getBoundingClientRect();
                    const videoTop = videoRect.top - containerRect.top + scrollTop;
                    const videoBottom = videoTop + video.offsetHeight;
                    
                    // Если видео полностью в зоне видимости
                    if (videoTop >= scrollTop && videoBottom <= scrollTop + containerHeight) {
                        if (video.paused && video.muted) {
                            // Только если видео еще не играло
                            if (!video.hasAttribute('data-played')) {
                                video.play().catch(e => console.log('Автоплей заблокирован:', e));
                                video.setAttribute('data-played', 'true');
                            }
                        }
                    }
                });
            }
            
            slidesContainer.addEventListener('scroll', checkVisibility);
            setTimeout(checkVisibility, 100);
            
            // Анимируем первый слайд сразу
            if (slideItems.length > 0) {
                setTimeout(() => {
                    slideItems[0].classList.add('active');
                }, 300);
            }
        });
    </script>
</body>
</html>
